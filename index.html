<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>RabbitMQ MessageBus by parshim</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">RabbitMQ MessageBus</h1>
      <h2 class="project-tagline">Message Bus Framework based on RabbitMQ with intuitive interface and built in Json serialization</h2>
      <a href="https://github.com/parshim/MessageBus" class="btn">View on GitHub</a>
      <a href="https://github.com/parshim/MessageBus/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/parshim/MessageBus/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><a href="https://travis-ci.org/parshim/MessageBus"><img src="https://travis-ci.org/parshim/MessageBus.svg" alt="Build Status"></a>
<a href="http://www.nuget.org/packages/RabbitMQ.MessageBus/"><img src="https://img.shields.io/nuget/dt/RabbitMQ.MessageBus.svg" alt="NuGet"></a></p>

<h1>
<a id="messagebus" class="anchor" href="#messagebus" aria-hidden="true"><span class="octicon octicon-link"></span></a>MessageBus</h1>

<p>Message Bus Framework based on RabbitMQ with intuitive interface and built in Json serialization.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Publish\Subscribe</li>
<li>Worker Queues</li>
<li>POCO messages support</li>
<li>Subscription based on message types<br>
</li>
<li>Message headers support</li>
<li>Header based message subscription filter</li>
<li>Connection strings support</li>
<li>Most RabbitMQ features are supported and provided via convenient and user friendly API

<ul>
<li>Transactional delivery</li>
<li>Message persistence</li>
<li>TTL</li>
</ul>
</li>
<li>Fast binary data transfer (pass through without serialization)</li>
</ul>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h2>

<h5>
<a id="messages-are-just-pocos" class="anchor" href="#messages-are-just-pocos" aria-hidden="true"><span class="octicon octicon-link"></span></a>Messages are just POCOs</h5>

<div class="highlight highlight-c#"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Person</span>
{
    <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">Id</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }
}</pre></div>

<p>Optionally, message classes may be annotated with DataContract and DataMemebr attributes to be able to generate contract classes on publisher and subscriber parties by using svcutil.exe.</p>

<h5>
<a id="publish-your-first-message" class="anchor" href="#publish-your-first-message" aria-hidden="true"><span class="octicon octicon-link"></span></a>Publish your first message</h5>

<div class="highlight highlight-c#"><pre><span class="pl-k">using</span> (IBus bus = <span class="pl-k">new</span> RabbitMQBus(busId))
{
    <span class="pl-k">using</span> (IPublisher publisher = bus.CreatePublisher())
    {
        publisher.Send(<span class="pl-k">new</span> Person { Id = <span class="pl-c1">5</span> });
    }
}</pre></div>

<p>Bus instance holds connection to RabbitMQ broker, thus once disposed connection is closed. 
Publisher creates dedicated AMQP model and can be used to publish messages from single thread. If publication is required from multiple threads, each required to create its own publisher instance.
All messages are sent by default to amq.headers exchange with two headers: Name and Namespace. By default it is type name and name space, however id class is decorated with DataContractAttribute Name and Namespace will be taken from it (if specified). </p>

<h5>
<a id="subscribe-for-messages" class="anchor" href="#subscribe-for-messages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Subscribe for messages</h5>

<div class="highlight highlight-c#"><pre><span class="pl-k">using</span> (IBus bus = <span class="pl-k">new</span> RabbitMQBus(busId))
{
    <span class="pl-k">using</span> (ISubscriber subscriber = bus.CreateSubscriber())
    {
        subscriber.Subscribe((Action&lt;Person&gt;) (p =&gt;
        {
            <span class="pl-c">// Do your work here</span>
        }));

        <span class="pl-c">// Start consuming messages</span>
        subscriber.Open();
    }
}</pre></div>

<p>Subscriber creates by default temporary queue, and each subscription binds this queue to amq.headers exchange with Name and Namespace headers. 
Thus only this particular message type will arrive to the subscriber.</p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p>There are a lot of features inside, most covered by tests and you are welcome to take a look.</p>

<p>I am working on documentation, so stay tuned.</p>

<p>Enjoy!</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/parshim/MessageBus">RabbitMQ MessageBus</a> is maintained by <a href="https://github.com/parshim">parshim</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-63064967-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

